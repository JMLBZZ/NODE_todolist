<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <title>TP - ToDoList</title>
</head>
    <body style="background-image: linear-gradient(90deg, #a0d4ee, #ffffff); color: #1a150e; transition: 0.3s linear;">

    <div class="container bg-light d-flex flex-column col-8 align-items-center justify-content-center mt-5 py-5 rounded shadow">
        <h1>
            Just Do List <i class="bi bi-check-lg" style="font-size:80px;"></i>
        </h1>
        <form method="POST" action="/task"><!-- route /task pour le traitement du formulaire -->
            <div class="input-group mb-3" style="min-width: 600px;">
                <input type="text" class="form-control border-dark" placeholder="Ajouter une tâche" name="task" required>
                <button class="btn btn-outline-dark" type="submit" id="addbtn" style="min-width: 120px;">Ajouter</button>
            </div>
        </form>

        <h2>TÂCHES</h2>

        <ul class="list-group" style="min-width: 600px;">
            <% tasks.forEach((task, index) => { %><!-- écriture ejs avec un foreach -->
                <li class="list-group-item p-0 border-0 mb-2">
                    <% if (task.done) { %>
                        <div class="input-group">
                            <div class="btn btn-success d-flex align-items-center">
                                <i class="bi bi-check-circle-fill"></i>
                            </div>
                            <s class="form-control bg-success text-white border-0"><%= task.title %></s>
                            <button class="btn btn-danger border-start" type="button" style="min-width: 120px;" onclick="window.location.href='/task/<%= index %>/delete'">Supprimer</button>
                        </div>
                    <% } else { %>
                        <div class="input-group border rounded">
                            <button class="btn d-flex align-items-center" onclick="window.location.href='/task/<%= index %>/done'">
                                <i class="bi bi-circle"></i>
                            </button>
                            <span class="form-control border-0"><%= task.title %></span>
                            <button class="btn btn-outline-success border-0" type="button" style="min-width: 120px;" onclick="window.location.href='/task/<%= index %>/done'">Terminer</button>
                        </div>
                    <% } %>  
                </li>
            <% }) %>
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>